# Environment configuration for MineRL-NPV
environment:
  # Grid dimensions
  grid_size:
    nx: 100  # X dimension (East-West)
    ny: 100  # Y dimension (North-South) 
    nz: 50   # Z dimension (elevation levels)
  
  # Block size (meters)
  block_size:
    x: 20
    y: 20
    z: 15

# Economic parameters (based on real mining economics)
economics:
  # Metal prices (USD)
  prices:
    cu_price_usd_per_lb: 3.8  # Copper price
    mo_price_usd_per_lb: 15.0  # Molybdenum price
    
  # Costs (USD per tonne)
  costs:
    mining_cost: 2.5      # Mining cost per tonne
    processing_cost: 8.0   # Base processing cost per tonne
    fixed_cost: 1.2       # Fixed operational cost per tonne
    
  # Processing cost modifiers
  processing_modifiers:
    bwi_factor: 0.1       # Additional cost per BWI unit above 15
    clay_penalty: 0.5     # Additional cost per % clay above 3%
    
  # Recovery functions (can be overridden by rec column if available)
  recovery:
    base_cu_recovery: 0.85  # Base copper recovery
    base_mo_recovery: 0.70  # Base molybdenum recovery
    
  # Discount rate
  discount:
    annual_rate: 0.12      # 12% annual discount rate
    convert_to_daily: true # Convert to daily rate for RL

# Mining constraints
constraints:
  # Daily mining capacity (tonnes)
  daily_capacity:
    min_tonnes: 50000
    max_tonnes: 100000
    
  # Precedence constraints
  precedence:
    enable_precedence: true
    cross_shape: 5        # Cross-shape precedence (5-point)
    bench_height: 15      # Bench height in meters
    slope_angle: 45       # Pit slope angle in degrees
    
  # UPL (Ultimate Pit Limit) constraints
  upl:
    enforce_upl: true
    upl_field: "upl"      # Column name for UPL flag (will be calculated if not present)

# State representation
state:
  # Geological features (from block model)
  geological_features:
    - "cu"          # Copper grade
    - "mo"          # Molybdenum grade  
    - "as"          # Arsenic grade
    - "clays"       # Clay content
    - "bwi"         # Ball Work Index
    - "rec"         # Recovery factor
    
  # Mineralogy features
  mineralogy_features:
    - "chalcocite"
    - "bornite"
    - "chalcopyrite"
    - "tennantite"
    - "molibdenite"
    - "pyrite"
    
  # Dynamic features (updated during episode)
  dynamic_features:
    - "mined_flag"      # Whether block has been mined
    - "extraction_day"  # Day when block was extracted
    - "destination"     # Processing destination
    
  # Normalization (for neural network input)
  normalization:
    method: "standardize"  # "standardize", "minmax", or "none"
    clip_outliers: true
    outlier_std: 3.0

# Reward function configuration
reward:
  # Revenue calculation
  revenue:
    use_tonnage_weight: true
    include_mo_revenue: true
    
  # Cost calculation  
  cost:
    include_processing_modifiers: true
    penalize_high_clay: true
    penalize_high_bwi: true
    
  # Reward shaping
  shaping:
    early_termination_penalty: -1000
    invalid_action_penalty: -100
    capacity_violation_penalty: -500