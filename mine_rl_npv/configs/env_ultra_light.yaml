# Environment configuration for MineRL-NPV (Ultra Light)
# This configuration uses synthetic data with very small dimensions for minimal memory usage
environment:
  # Grid dimensions (ultra-small for minimal memory)
  grid_size:
    nx: 20   # X dimension (East-West) - very small
    ny: 20   # Y dimension (North-South) - very small
    nz: 10   # Z dimension (elevation levels) - very small
  
  # Block size (meters)
  block_size:
    x: 20
    y: 20
    z: 15
    
  # Use synthetic data for ultra-light mode
  use_synthetic_data: true

# Economic parameters (simplified)
economics:
  # Metal prices (USD)
  prices:
    cu_price_usd_per_lb: 3.8  # Copper price
    mo_price_usd_per_lb: 15.0  # Molybdenum price
    
  # Costs (USD per tonne)
  costs:
    mining_cost: 2.5      # Mining cost per tonne
    processing_cost: 8.0   # Base processing cost per tonne
    fixed_cost: 1.2       # Fixed operational cost per tonne
    
  # Processing cost modifiers
  processing_modifiers:
    bwi_factor: 0.1       # Additional cost per BWI unit above 15
    clay_penalty: 0.5     # Additional cost per % clay above 3%
    
  # Recovery functions
  recovery:
    base_cu_recovery: 0.85  # Base copper recovery
    base_mo_recovery: 0.70  # Base molybdenum recovery
    
  # Discount rate
  discount:
    annual_rate: 0.12      # 12% annual discount rate
    convert_to_daily: true # Convert to daily rate for RL

# Mining constraints
constraints:
  # Daily mining capacity (tonnes) - small for ultra-light
  daily_capacity:
    min_tonnes: 5000      # Small minimum
    max_tonnes: 15000     # Small maximum
    
  # Precedence constraints
  precedence:
    enable_precedence: true
    cross_shape: 5        # Cross-shape precedence (5-point)
    bench_height: 15      # Bench height in meters
    slope_angle: 45       # Pit slope angle in degrees
    
  # UPL (Ultimate Pit Limit) constraints
  upl:
    enforce_upl: true
    upl_field: "upl"      # Column name for UPL flag (will be calculated if not present)

# State representation (simplified)
state:
  # Geological features (from block model)
  geological_features:
    - "cu"          # Copper grade
    - "mo"          # Molybdenum grade  
    - "clays"       # Clay content
    - "bwi"         # Ball Work Index
    - "rec"         # Recovery factor
    
  # Mineralogy features (reduced set)
  mineralogy_features:
    - "chalcocite"
    - "bornite"
    - "chalcopyrite"
    
  # Dynamic features (updated during episode)
  dynamic_features:
    - "mined_flag"      # Whether block has been mined
    - "extraction_day"  # Day when block was extracted
    
  # Normalization (for neural network input)
  normalization:
    method: "standardize"  # "standardize", "minmax", or "none"
    clip_outliers: true
    outlier_std: 3.0

# Reward function configuration
reward:
  # Revenue calculation
  revenue:
    use_tonnage_weight: true
    include_mo_revenue: true
    
  # Cost calculation  
  cost:
    include_processing_modifiers: true
    penalize_high_clay: true
    penalize_high_bwi: true
    
  # Reward shaping
  shaping:
    early_termination_penalty: -1000
    invalid_action_penalty: -100
    capacity_violation_penalty: -500